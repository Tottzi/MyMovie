(this.webpackJsonpmovie=this.webpackJsonpmovie||[]).push([[0],{130:function(e,t,a){},166:function(e,t,a){},168:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(57),i=a.n(s),o=(a(130),a(23)),r=a.n(o),l=a(55),m=a(83),j=a(10),d=(a(166),a(147)),u=(a(168),a(2)),b=function(e){var t=e.movies;return Object(u.jsx)("div",{className:"dropdown",children:t.length>0&&t.map((function(e){return Object(u.jsxs)("a",{href:Object(d.concat)("/MyMovie/movie/"+e.imdbID),style:{display:"flex",flexDirection:"row"},children:["N/A"!==e.Poster?Object(u.jsx)("img",{alt:"pic",src:e.Poster,style:{maxWidth:"80px"}}):Object(u.jsx)("img",{alt:"pictures",src:"https://media.istockphoto.com/vectors/no-image-available-sign-vector-id1138179183?k=6&m=1138179183&s=612x612&w=0&h=prMYPP9mLRNpTp3XIykjeJJ8oCZRhb2iez6vKs8a8eE=",style:{maxWidth:"80px"}}),Object(u.jsx)("h3",{children:e.Title},e.imdbID)]},e.imdbID)}))})},h=a(12),O=function(e){var t=e.movies,a=e.fetchMoviesByText,n=Object(c.useState)(""),s=Object(j.a)(n,2),i=s[0],o=s[1],r="/search"===Object(h.h)().pathname?"searchbar searchbar__margin":"searchbar";return Object(c.useEffect)((function(){i.length>2&&a(i)}),[i]),Object(u.jsxs)("div",{className:r,children:[Object(u.jsx)("label",{className:"searchbar__label",htmlFor:"search",children:"Search ...        "}),Object(u.jsx)("input",{type:"text",placeholder:"type a movie",value:i,onChange:function(e){return o(e.target.value)}}),t.length>0&&Object(u.jsx)(b,{movies:t})]})},v=a(18),_=a.n(v),p=a(212),x=function(e){var t=e.movie,a=e.addComment,n=localStorage.getItem("userName"),s=Object(c.useState)(""),i=Object(j.a)(s,2),o=i[0],r=i[1];return Object(u.jsx)("div",{className:"form_comment_add",children:Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c=new Date,s={author:Math.random().toString(16).substr(2,10),authorName:n,text:o,timeStamp:c,id:Math.random().toString(16).substr(2,10)};a(s,t),r("")},children:[Object(u.jsx)("textarea",{rows:"4",cols:"25",className:"form_comment_add__input",value:o,onChange:function(e){return r(e.target.value)}}),Object(u.jsx)("input",{type:"submit",value:"Add",className:"form_comment_add_button"})]})})},g=a(209),f="DEV"===Object({NODE_ENV:"production",PUBLIC_URL:"/MyMovie",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).MODE?"http://localhost:5000":"https://hackday-mymovies-backend.herokuapp.com",S=function(e){var t=e.comment,a=e.imdbID,n=new Date(t.timeStamp),s=1===n.getDate().toString().length?"0".concat(n.getDate()):n.getDate(),i=1===n.getMonth().toString().length?"0".concat(n.getMonth()):n.getMonth(),o=1===n.getHours().toString().length?"0".concat(n.getHours()):n.getHours(),r=1===n.getMinutes().toString().length?"0".concat(n.getMinutes()):n.getMinutes(),l="".concat(s,"/").concat(i," ").concat(o,":").concat(r),d=localStorage.getItem("userName"),b=Object(c.useState)(!1),h=Object(j.a)(b,2),O=h[0],v=h[1],p=Object(c.useState)(t.text),x=Object(j.a)(p,2),S=x[0],N=x[1],D=Object(c.useState)(!1),y=Object(j.a)(D,2),M=y[0],E=y[1],T=Object(c.useRef)(null);return"undefined"===t?Object(u.jsx)("h2",{children:"No comment"}):Object(u.jsxs)("div",{className:"comment_container",ref:T,children:[d===t.authorName&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{className:"comment__remove comment__edit",onClick:function(e){O&&t.text!==S&&_.a.put("".concat(f,"/api/movie/comment"),{data:{imdbID:a,comment:Object(m.a)(Object(m.a)({},t),{},{text:S,changed:new Date})}}),v(!O),console.log(O)},children:"E"}),Object(u.jsx)("button",{className:"comment__remove",onClick:function(){return E(!0)},children:"X"}),Object(u.jsx)(g.a,{className:"comment__remove__confirm",header:"Delete comment",open:M,onCancel:function(){return E(!1)},onConfirm:function(e){T.current.remove(),E(!1),_.a.delete("".concat(f,"/api/movie/comment"),{data:{imdbID:a,comment:t.id}})},size:"small"})]}),t&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{children:t.authorName}),O?Object(u.jsx)("input",{className:"comment__text",value:S,onChange:function(e){return N(e.target.value)}}):Object(u.jsxs)("p",{className:"comment__text",children:[" ",S]}),t.changed&&Object(u.jsx)("p",{className:"comment__date__changed",children:"Edited"}),Object(u.jsx)("p",{className:"comment__date",children:l})]})]})},N="DEV"===Object({NODE_ENV:"production",PUBLIC_URL:"/MyMovie",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).MODE?"http://localhost:5000":"https://hackday-mymovies-backend.herokuapp.com",D=function(e){var t=e.movie,a=(e.user,e.addComment),n=e.fetchMoviesById,s=e.updateUser,i=Object(h.i)().id,o=Object(c.useState)(3),r=Object(j.a)(o,2),l=r[0],m=r[1],d=Object(c.useState)(!1),b=Object(j.a)(d,2),O=b[0],v=b[1],g=O?"movietile__store__saved movietile__store__saved--active":"movietile__store__saved";Object(c.useEffect)((function(){n(i),setTimeout((function(){m(Math.round(parseInt(t.imdbRating)))}),100)}),[]);return console.log(l),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"movietile__store",children:[Object(u.jsx)("img",{src:t.Poster}),Object(u.jsxs)("div",{className:"movietile__store__details",children:[Object(u.jsx)("div",{className:g,children:"Rating is saved"}),Object(u.jsx)("h3",{children:t.Title}),Object(u.jsx)("p",{children:"IMDB Rating:"}),Object(u.jsx)(p.a,{icon:"star",defaultRating:parseInt(t.imdbRating),maxRating:10,onRate:function(e){var t=e.target.getAttribute("aria-posinset");s(e.target.getAttribute("aria-posinset"),i),_.a.post("".concat(N,"/api/movie/rating"),{imdbID:i,ratings:[{author:"asdfgghj",authorName:localStorage.getItem("userName"),rating:t}]}),v(!O),setTimeout((function(){v(!!O),console.log(O)}),1e3),console.log(O)}}),Object(u.jsx)("p",{children:t.Plot}),Object(u.jsxs)("div",{className:"movietile__store__desc",children:[Object(u.jsx)("p",{style:{marginBottom:"0"},children:"Actors:"}),Object(u.jsx)("p",{style:{marginBottom:"2rem"},children:t.Actors})]}),Object(u.jsxs)("p",{children:["Released: ",t.Released]})]})]}),Object(u.jsx)(x,{movie:t,addComment:a}),Object(u.jsx)("div",{className:"comment",children:t.localData&&t.localData.comments?t.localData.comments.map((function(e){return Object(u.jsx)(S,{imdbID:i,comment:e},e.timeStamp)})):Object(u.jsx)("p",{className:"comment",children:"No comment"})})]})},y=a(34),M=a(213),E=a(214),T=a(208),I=a(210),C="DEV"===Object({NODE_ENV:"production",PUBLIC_URL:"/MyMovie",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).MODE?"http://localhost:5000":"https://hackday-mymovies-backend.herokuapp.com",R=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(""),i=Object(j.a)(s,2),o=i[0],m=i[1],d=Object(h.g)(),b=function(){var e=Object(l.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.post("".concat(C,"/api/user"),{userName:a,userPass:o});case 2:localStorage.setItem("userName",a),n(""),m(""),d.push("/MyMovie/"),window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)(M.a,{placeholder:!0,children:Object(u.jsx)(E.a,{columns:1,relaxed:"very",stackable:!0,children:Object(u.jsx)(E.a.Column,{children:Object(u.jsxs)(T.a,{children:[Object(u.jsx)(T.a.Input,{onChange:function(e){return n(e.target.value)},value:a,icon:"user",iconPosition:"left",label:"Username",placeholder:"Username"}),Object(u.jsx)(T.a.Input,{onChange:function(e){return m(e.target.value)},value:o,icon:"lock",iconPosition:"left",label:"Password",type:"password"}),Object(u.jsx)(I.a,{content:"Login",primary:!0,onClick:b})]})})})})},k=(a(194),function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),a=t[0],n=t[1];Object(c.useEffect)((function(){var e=localStorage.getItem("userName");n(e)}),[]);return a?Object(u.jsx)("div",{className:"navbar__container",children:Object(u.jsxs)("nav",{className:"navbar__body",children:[Object(u.jsxs)("ul",{className:"navbar__list",children:[Object(u.jsx)("li",{className:"navbar__list__item",children:Object(u.jsx)("a",{href:"/MyMovie/",children:"Home"})}),Object(u.jsx)("li",{className:"navbar__list__item",children:Object(u.jsx)(y.b,{to:"/MyMovie/search",children:"Search"})}),Object(u.jsx)("li",{className:"navbar__list__item",children:Object(u.jsx)(y.b,{to:"/MyMovie/mymovies",children:"MyMovies"})})]}),Object(u.jsxs)("ul",{className:"navbar__list navbar__list--right",children:[Object(u.jsx)("li",{children:Object(u.jsxs)("h2",{children:["Hi ",a,"!"]})}),Object(u.jsx)("li",{className:"navbar__list__item",children:Object(u.jsx)("a",{href:"/MyMovie/login",onClick:function(){localStorage.removeItem("userName"),n("")},children:"Logout"})})]})]})}):Object(u.jsx)("div",{className:"navbar__container",children:Object(u.jsxs)("nav",{className:"navbar__body",children:[Object(u.jsx)("ul",{className:"navbar__list",children:Object(u.jsx)("li",{className:"navbar__list__item",children:Object(u.jsx)("a",{href:"/MyMovie/",children:"Home"})})}),Object(u.jsx)("ul",{className:"navbar__list navbar__list--right",children:Object(u.jsx)("li",{className:"navbar__list__item",children:Object(u.jsx)("a",{href:"/MyMovie/login",children:"Login"})})})]})})}),P="DEV"===Object({NODE_ENV:"production",PUBLIC_URL:"/MyMovie",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).MODE?"http://localhost:5000":"https://hackday-mymovies-backend.herokuapp.com",w=function(e){var t=e.movie,a="/MyMovie/movie/".concat(t.imdbID),n=Object(c.useState)(0),s=Object(j.a)(n,2),i=s[0],o=(s[1],t.localData&&t.localData.ratings[0].rating/2),r=localStorage.getItem("userName");Object(c.useEffect)((function(){}),[]);return Object(u.jsxs)("div",{className:"movietile",children:[Object(u.jsx)("button",{onClick:function(e){_.a.delete("".concat(P,"/api/user/mymovies"),{data:{name:r,imdbID:t.imdbID}}),e.target.parentNode.remove()},className:"movietile__button",children:"X"}),Object(u.jsx)(y.b,{to:a,children:Object(u.jsx)("img",{src:t.Poster,alt:t.Title})}),Object(u.jsxs)("div",{className:"movietile__text",children:[Object(u.jsx)("h4",{className:"movietile__text__heading",children:t.Title}),Object(u.jsx)(p.a,{icon:"star",defaultRating:i||o,maxRating:5,disabled:!0})]})]})},A=function(e){var t=e.mymovies,a=e.fetchMyMovies;return Object(c.useEffect)((function(){a(localStorage.getItem("userName"))}),[]),t.length<1?Object(u.jsx)("h2",{children:"You don't have movies in the collection"}):Object(u.jsx)("div",{className:"mymovies",children:t.length>0&&t.map((function(e){return Object(u.jsx)(w,{movie:e},e.imdbID)}))})},H=function(){return Object(u.jsx)("div",{className:"home_welcome_img",children:Object(u.jsx)("img",{src:"https://t3.ftcdn.net/jpg/02/41/32/08/360_F_241320835_Z2fuURdWsRgtTnkARGQqiorzH8p4fnE5.jpg"})})},W="DEV"===Object({NODE_ENV:"production",PUBLIC_URL:"/MyMovie",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).MODE?"http://localhost:5000":"https://hackday-mymovies-backend.herokuapp.com";var F=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)([]),i=Object(j.a)(s,2),o=i[0],d=(i[1],Object(c.useState)({})),b=Object(j.a)(d,2),v=b[0],p=b[1],x=Object(c.useState)(""),g=Object(j.a)(x,2),f=(g[0],g[1]),S=Object(c.useState)({}),N=Object(j.a)(S,2),M=N[0],E=N[1],T=Object(c.useState)([]),I=Object(j.a)(T,2),C=I[0],P=I[1];Object(c.useEffect)((function(){f(localStorage.getItem("userName")),setTimeout((function(){F(localStorage.getItem("userName"))}),100),setTimeout((function(){E(JSON.parse(localStorage.getItem("userData")))}),1e3)}),[]);var w=function(){var e=Object(l.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(W,"/api/user/mymovies/").concat(t));case 2:a=e.sent,P(a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(W,"/api/user/").concat(t));case 2:return a=e.sent,e.t0=localStorage,e.next=6,JSON.stringify(a.data);case 6:e.t1=e.sent,e.t0.setItem.call(e.t0,"userData",e.t1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(l.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(W,"/api/movies/").concat(t));case 2:return(a=e.sent).data.Search&&n(a.data.Search),e.abrupt("return",a.data.Search);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(l.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(W,"/api/movie/").concat(t));case 2:return(a=e.sent).data&&p(a.data),e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)(y.a,{children:[!localStorage.getItem("userName")&&Object(u.jsx)(h.a,{to:{pathname:"/MyMovie/login"}}),Object(u.jsx)(k,{}),Object(u.jsx)(h.d,{children:Object(u.jsx)(h.b,{path:"/MyMovie/",exact:!0,children:Object(u.jsx)("div",{className:"App login_page",children:Object(u.jsx)("div",{className:"login_page",children:Object(u.jsx)(H,{})})})})}),Object(u.jsx)(h.d,{children:Object(u.jsx)(h.b,{path:"/MyMovie/login",exact:!0,children:Object(u.jsx)("div",{className:"App login_page",children:Object(u.jsx)("div",{className:"login_page",children:Object(u.jsx)(R,{style:{maxWidth:"300px",position:"absolute"}})})})})}),Object(u.jsx)(h.d,{children:Object(u.jsx)(h.b,{path:"/MyMovie/search",exact:!0,children:Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(O,{movies:a,fetchMoviesByText:B})})})}),Object(u.jsx)(h.d,{children:Object(u.jsx)(h.b,{path:"/MyMovie/movie/:id",children:Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)("div",{className:"movie__present",children:[Object(u.jsx)(O,{movies:a,fetchMoviesByText:B,fetchMoviesById:K}),Object(u.jsx)(D,{movie:v,user:M,fetchMoviesById:K,updateUser:function(e,t){var a=JSON.parse(localStorage.getItem("userData")),c=a.movies.map((function(a){return a.imdbID===t&&(a.ratings=e),a}));a.movies=c,E(a)},addComment:function(e,t){new Date;var a=Object(m.a)({},t);t.localData?(t.localData.comments||(a.localData.comments=[]),a.localData.comments.unshift(e),p(a)):(a.localData={},a.localData.imdbID=e.imdbID,a.localData.comments=[],a.localData.comments.unshift(e),p(a)),_.a.post("".concat(W,"/api/movie/comment"),{imdbID:t.imdbID,comments:[e]})},localMovies:o})]})})})}),Object(u.jsx)(h.d,{children:Object(u.jsx)(h.b,{path:"/MyMovie/mymovies",children:Object(u.jsx)("div",{className:"App movietile_conteiner",children:Object(u.jsx)(A,{mymovies:C,fetchMyMovies:w})})})})]})},B=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,216)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),s(e),i(e)}))},K=document.createElement("link");K.rel="stylesheet",K.href="https://cdn.jsdelivr.net/npm/semantic-ui/dist/semantic.min.css",document.head.prepend(K),i.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(F,{})}),document.getElementById("root")),B()}},[[195,1,2]]]);
//# sourceMappingURL=main.a22e89f1.chunk.js.map